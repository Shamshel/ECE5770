# Tiva-C specific tasks Makefile

ROOT=../../..
INCL=${ROOT}/include/Tasks/Tiva-C

include $(ROOT)/makedefs

UART_DRIVER=UART_driver
UART_DRIVER_OBJ=$(addsuffix .o,$(UART_DRIVER))
#UART_DRIVER_OBJ=$(addprefix $(ROOT)/$(OBJ_DIR)/,$(_UART_DRIVER_OBJ))

UART_DRIVER_DEPS=UART_driver.c
#UART_DRIVER_DEPS=$(addprefix $(SRC_DIR)/$(TASK_DIR)/,$(_UART_DRIVER_DEPS))
_UART_DRIVER_INCL=UART_driver.h
UART_DRIVER_INCL=$(addprefix $(INCL)/,$(_UART_DRIVER_INCL))

WIFI_DRIVER=Wi-Fi_driver
WIFI_DRIVER_OBJ=$(addsuffix .o,$(WIFI_DRIVER))
#WIFI_DRIVER_OBJ=$(addprefix $(ROOT)/$(OBJ_DIR)/,$(_WIFI_DRIVER_OBJ))

WIFI_DRIVER_DEPS=Wi-Fi_driver.c
#WIFI_DRIVER_DEPS=$(addprefix $(SRC_DIR)/$(TASK_DIR)/,$(_WIFI_DRIVER_DEPS))
_WIFI_DRIVER_INCL=Wi-Fi_driver.h
WIFI_DRIVER_INCL=$(addprefix $(INCL)/,$(_WIFI_DRIVER_INCL))


WIFI_CONTROLLER=Wi-Fi_controller
WIFI_CONTROLLER_OBJ=$(addsuffix .o,$(WIFI_CONTROLLER))
#WIFI_CONTROLLER_OBJ=$(addprefix $(ROOT)/$(OBJ_DIR)/,$(_WIFI_CONTROLLER_OBJ))

WIFI_CONTROLLER_DEPS=Wi-Fi_controller.c
#WIFI_CONTROLLER_DEPS=$(addprefix $(SRC_DIR)/$(TASK_DIR)/,$(_WIFI_CONTROLLER_DEPS))
_WIFI_CONTROLLER_INCL=Wi-Fi_controller.h
WIFI_CONTROLLER_INCL=$(addprefix $(INCL)/,$(_WIFI_CONTROLLER_INCL))

MOTOR_DRIVER=Motor_driver
MOTOR_DRIVER_OBJ=$(addsuffix .o,$(MOTOR_DRIVER))
#MOTOR_DRIVER_OBJ=$(addprefix $(ROOT)/$(OBJ_DIR)/,$(_MOTOR_DRIVER_OBJ))

MOTOR_DRIVER_DEPS=Motor_driver.c
#MOTOR_DRIVER_DEPS=$(addprefix $(SRC_DIR)/$(TASK_DIR)/,$(_MOTOR_DRIVER_DEPS))
_MOTOR_DRIVER_INCL=Motor_driver.h
MOTOR_DRIVER_INCL=$(addprefix $(INCL)/,$(_MOTOR_DRIVER_INCL))

KERNEL_DRIVER=Kernel_driver
KERNEL_DRIVER_OBJ=$(addsuffix .o,$(KERNEL_DRIVER))
#KERNEL_DRIVER_OBJ=$(addprefix $(ROOT)/$(INCLUDE_DIR)/$(TASK_DIR)/,$(_KERNEL_DRIVER_OBJ))

KERNEL_DRIVER_DEPS=Kernel_driver.c
#KERNEL_DRIVER_DEPS=$(addprefix $(SRC_DIR)/$(TASK_DIR)/,$(_KERNEL_DRIVER_DEPS))
_KERNEL_DRIVER_INCL=Kernel_driver.h
KERNEL_DRIVER_INCL=$(addprefix $(INCL)/,$(_KERNEL_DRIVER_INCL))

$(WIFI_DRIVER) $(WIFI_DRIVER_OBJ): $(WIFI_DRIVER_DEPS) $(WIFI_DRIVER_INCL)
	$(TIVA_CC) -c -o $(ROOT)/$(OBJ_DIR)/$(WIFI_DRIVER_OBJ) -I $(ROOT)/$(INCLUDE_DIR)/ $< $(TIVA_CFLAGS)

$(WIFI_CONTROLLER) $(WIFI_CONTROLLER_OBJ): $(WIFI_CONTROLLER_DEPS) $(WIFI_CONTROLLER_INCL)
	$(TIVA_CC) -c -o $(ROOT)/$(OBJ_DIR)/$(WIFI_CONTROLLER_OBJ) -I $(ROOT)/$(INCLUDE_DIR)/ $< $(TIVA_CFLAGS)

$(UART_DRIVER) $(UART_DRIVER_OBJ): $(UART_DRIVER_DEPS) $(UART_DRIVER_INCL)
	$(TIVA_CC) -c -o $(ROOT)/$(OBJ_DIR)/$(UART_DRIVER_OBJ) -I $(ROOT)/$(INCLUDE_DIR)/ $< $(TIVA_CFLAGS)

$(MOTOR_DRIVER) $(MOTOR_DRIVER_OBJ): $(MOTOR_DRIVER_DEPS) $(MOTOR_DRIVER_INCL)
	$(TIVA_CC) -c -o $(ROOT)/$(OBJ_DIR)/$(MOTOR_DRIVER_OBJ) -I $(ROOT)/$(INCLUDE_DIR)/ $< $(TIVA_CFLAGS)

$(KERNEL_DRIVER) $(KERNEL_DRIVER_OBJ): $(KERNEL_DRIVER_DEPS) $(KERNEL_DRIVER_INCL)
	$(TIVA_CC) -c -o $(ROOT)/$(OBJ_DIR)/$(KERNEL_DRIVER_OBJ) -I $(ROOT)/$(INCLUDE_DIR)/ $< $(TIVA_CFLAGS)

%.o: %.c
	$(TIVA_CC) -c -o $(OBJ_DIR)

.PHONY: clean

clean:
	rm -f *~ *.bin *.elf *.axf
